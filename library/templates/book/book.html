{% extends "../base.html" %}

{% block title %}Book{% endblock %}
{% load static %}
<style>
    table {
        border-collapse: collapse
    }

    td {
        border: 1px solid black;
        padding: 10px;
    }
</style>

{% block content %}
{% if form.errors %}

{% endif %}

<div class="col mb-3">
    <h1>Mes Livres
        <a href="{% url 'addBook' %}" class="btn btn-primary"><i class="bi bi-plus-lg"></i></a>
    </h1>
</div>
<div>
    <!-- table html -->
    <table id="table_book" class="table table-bordered text-center">
        <tr>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Editeur</th>
            <th>Collection</th>
            <th>Genre</th>
            <th>Image</th>
            <th>Dur√©e maximum emprunt</th>
            <th>Edition</th>
            <th>Suppression</th>
        </tr>
        {% if books|length_is:"0" %}
        <tr>
            <td colspan="10">Aucun livre</td>
        </tr>
        {% endif %}
        {% for library in libraryList %}
        <tr>
            <td colspan="9">{{ library.name }}</td>
        </tr>
        {% for book in books %}
        <tr class="text-justify">
            {% if book.library == library %}
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.editor }}</td>
            <td>{{ book.collection }}</td>
            <td>{{ book.genre }}</td>
            {% if book.jacket %}
            <td><img src="{{ book.jacket.url }}" width="30px"> </td>
            {% else %}
            <td></td>
            {% endif %}
            <td>{{ book.duration_max }}</td>
            {% if book.library.owner == user %}
            <td><a href="{% url 'editBook' book.id %}" class="btn btn-warning"><i class="bi bi-pencil"></i></a></td>
            {% else %}
            <td></td>
            {% endif %}
            <td><a href="{% url 'deleteBook' book.id %}" class="btn btn-danger"><i class="bi bi-trash"></i></a></td>
            {% endif %}
        </tr>
        
        {% endfor %}
        {% endfor %}

    </table>


</div>



{% endblock %}